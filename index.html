<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chat Lab â€” MissÃ£o II (v1.7.3-LV)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">ğŸ’¬</div>
      <h1>Chat Lab â€” MissÃ£o II â€¢ v1.7.3-LV</h1>
    </div>
    <div class="scorebar">
      <span class="chip">ğŸ¤ Empatia: <b id="scoreEmpatia">0</b></span>
      <span class="chip">ğŸ¯ ConduÃ§Ã£o: <b id="scoreConducao">0</b></span>
      <span class="chip">â±ï¸ Agilidade: <b id="scoreAgilidade">0</b></span>
      <span class="chip">ğŸ“‚ Caso: <b id="caseIndex">1</b>/<b id="caseTotal">0</b></span>
    </div>
  </header>

  <div class="container">
    <aside class="panel info">
      <section class="feedback">
        <h3>Feedback da resposta</h3>
        <div id="fbContent" class="fb-box">
          <p class="muted">Escolha uma alternativa para ver o feedback aqui.</p>
        </div>
      </section>

      <section class="prefs" style="margin-top:12px">
        <h3>PreferÃªncias</h3>
        <label class="toggle">
          <input type="checkbox" id="prefLargeUI" />
          <span aria-hidden="true"></span>
          <span class="toggle-text">Interfaces maiores</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="prefDarkMode" />
          <span aria-hidden="true"></span>
          <span class="toggle-text">Tema escuro</span>
        </label>
      </section>
    </aside>

    <main class="game panel">
      <div class="statusbar">
        <div class="timer">
          <div class="progress"><div id="timeBar" class="progress-bar"></div></div>
          <strong id="timeLabel">0s</strong>
        </div>
        <div class="controls">
          <button id="btnVerify" class="btn secondary">ğŸ“ Estou verificandoâ€¦</button>
        </div>
      </div>

      <div id="chat" class="chat"></div>
      <div id="options" class="options"></div>

      <div class="footerbar">
        <div class="legend">
          <span class="chip">Empatia</span>
          <span class="chip">ConduÃ§Ã£o</span>
          <span class="chip">Agilidade</span>
        </div>
        <div class="footer-actions">
          <button id="btnOpenTyping" class="btn ghost">âš¡ DigitaÃ§Ã£o 45s</button>
        </div>
      </div>
    </main>
  </div>

  <div id="modalIntro" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <h2>IdentificaÃ§Ã£o do jogador</h2>
      <p class="muted">Os dados ficam apenas neste navegador (localStorage) para personalizar a experiÃªncia.</p>
      <div class="typing-box">
        <label>Nome
          <input id="inPlayerName" type="text" placeholder="Seu nome" />
        </label>
        <label>CPF
          <input id="inPlayerCPF" type="text" inputmode="numeric" placeholder="000.000.000-00" />
        </label>
      </div>
      <section class="game-rules" style="font-size:13px;line-height:1.5;margin-top:12px">
        <h3 style="margin-bottom:6px">ğŸ“œ Regras do jogo</h3>
        <ul class="rules">
          <li><strong>Objetivo:</strong> aplicar Empatia, ConduÃ§Ã£o e Agilidade para conduzir uma negociaÃ§Ã£o eficaz.</li>
          <li><strong>Casos:</strong> vocÃª enfrentarÃ¡ <em>8 situaÃ§Ãµes</em> simuladas.</li>
          <li><strong>Tempo por caso:</strong> <b>30s</b> para escolher sua resposta.</li>
          <li><strong>PontuaÃ§Ã£o:</strong>
            <ul>
              <li><em>Empatia</em>: +10 se a opÃ§Ã£o tiver <code>empatia</code>; âˆ’6 se tiver <code>frio</code>.</li>
              <li><em>ConduÃ§Ã£o</em>: +10 <code>conducao</code>; +6 <code>pergunta_fechada</code>; +4 <code>comunicacao</code>; âˆ’6 <code>desvio</code>.</li>
              <li><em>Agilidade</em>: atÃ© +10 por caso, proporcional ao tempo restante.</li>
            </ul>
          </li>
          <li><strong>ğŸ“ Estou verificandoâ€¦</strong>: pausa o tempo por 5s e registra a boa prÃ¡tica.</li>
          <li><strong>âš¡ DigitaÃ§Ã£o (45s)</strong>: pode gerar bÃ´nus de Agilidade (atÃ© +20) ao final.</li>
          <li><strong>âŒ¨ï¸ Atalhos:</strong> <kbd>V</kbd> = Verificar Â· <kbd>O</kbd> = Alternativas.</li>
        </ul>
      </section>
      <label class="toggle" style="margin-top:8px">
        <input type="checkbox" id="tgSkipIntro" />
        <span aria-hidden="true"></span>
        <span class="toggle-text">NÃ£o mostrar novamente</span>
      </label>
      <div class="modal-actions">
        <button id="btnStart" class="btn primary" disabled>ComeÃ§ar â–¶</button>
      </div>
    </div>
  </div>

  <div id="modalResult" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card wide">
      <h2>MissÃ£o concluÃ­da ğŸ‰</h2>
      <div class="results-grid">
        <div class="res-box">ğŸ¤ Empatia <div id="resEmpatia">0</div></div>
        <div class="res-box">ğŸ¯ ConduÃ§Ã£o <div id="resConducao">0</div></div>
        <div class="res-box">â±ï¸ Agilidade <div id="resAgilidade">0</div></div>
        <div class="res-box">â³ Tempo mÃ©dio <div id="resTempoMedio">0s</div></div>
      </div>
      <div class="medals" id="medals" style="margin-top:10px"></div>
      <div class="modal-actions">
        <button id="btnDownload" class="btn secondary">Baixar relatÃ³rio (.json)</button>
        <button id="btnRestart" class="btn primary">Jogar novamente</button>
      </div>
    </div>
  </div>

  <div id="modalTyping" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card wide">
      <h2>Desafio de DigitaÃ§Ã£o â€” 45s âš¡</h2>
      <p class="muted">Digite o texto abaixo com precisÃ£o. Sua velocidade (WPM) e acurÃ¡cia podem gerar bÃ´nus de agilidade.</p>
      <div class="typing-box">
        <div id="typingText" class="typing-text"></div>
        <textarea id="typingInput" class="typing-input" placeholder="Clique em Iniciar e comece a digitarâ€¦" disabled></textarea>
        <div class="typing-bar">
          <div class="progress" style="flex:1"><div id="typingBar" class="progress-bar" style="width:100%"></div></div>
          <div style="display:flex;gap:10px;min-width:180px;justify-content:flex-end">
            <span>â±ï¸ <b id="typingTime">45s</b></span>
            <span>WPM: <b id="typingWPM">0</b></span>
            <span>AcurÃ¡cia: <b id="typingACC">0%</b></span>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button id="btnTypingStart" class="btn primary">Iniciar</button>
        <button id="btnTypingSubmit" class="btn secondary" disabled>Enviar</button>
        <button id="btnTypingClose" class="btn ghost">Fechar</button>
      </div>
    </div>
  </div>

  <footer class="credits">Feito para treinar negociaÃ§Ã£o em cobranÃ§a com empatia, conduÃ§Ã£o e agilidade.</footer>
  <script src="script.js"></script>
</body>
</html>